(function(){var e;var d=function d(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});
while(c--){e=b[c];if(!a[e]){a[e]=d}}}());jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a
},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a
},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a
},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a
},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a
},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,n,m){var j=1.70158;
var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-j)*(2*Math.PI)/l))+e},easeOutElastic:function(f,h,e,n,m){var j=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n
}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}return g*Math.pow(2,-10*h)*Math.sin((h*m-j)*(2*Math.PI)/l)+n+e},easeInOutElastic:function(f,h,e,n,m){var j=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m/2)==2){return e+n}if(!l){l=m*(0.3*1.5)}if(g<Math.abs(n)){g=n;
var j=l/4}else{var j=l/(2*Math.PI)*Math.asin(n/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-j)*(2*Math.PI)/l))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*m-j)*(2*Math.PI)/l)*0.5+n+e},easeInBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158
}return j*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a
}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a
}});(function(f){var e="bgPos";var d=!!f.Tween;if(d){f.Tween.propHooks.backgroundPosition={get:function(g){return b(f(g.elem).css(g.prop))},set:function(g){c(g)}}}else{f.fx.step.backgroundPosition=c}function b(l){var j=(l||"").split(/ /);var h={center:"50%",left:"0%",right:"100%",top:"0%",bottom:"100%"};
var g=function(n){var m=(h[j[n]]||j[n]||"50%").match(/^([+-]=)?([+-]?\d+(\.\d*)?)(.*)$/);j[n]=[m[1],parseFloat(m[2]),m[4]||"px"]};if(j.length==1&&f.inArray(j[0],["top","bottom"])>-1){j[1]=j[0];j[0]="50%"}g(0);g(1);return j}function c(g){if(!g.set){a(g)}f(g.elem).css("background-position",((g.pos*(g.end[0][1]-g.start[0][1])+g.start[0][1])+g.end[0][2])+" "+((g.pos*(g.end[1][1]-g.start[1][1])+g.start[1][1])+g.end[1][2]))
}function a(h){var g=f(h.elem);var l=g.data(e);g.css("backgroundPosition",l);h.start=b(l);h.end=b(f.fn.jquery>="1.6"?h.end:h.options.curAnim.backgroundPosition||h.options.curAnim["background-position"]);for(var j=0;j<h.end.length;j++){if(h.end[j][0]){h.end[j][1]=h.start[j][1]+(h.end[j][0]=="-="?-1:+1)*h.end[j][1]
}}h.set=true}f.fn.animate=function(g){return function(j,h,m,l){if(j.backgroundPosition||j["background-position"]){this.data(e,this.css("backgroundPosition")||"left top")}return g.apply(this,[j,h,m,l])}}(f.fn.animate)})(jQuery);(function(j,p,s){var r="hashchange",m=document,o,n=j.event.special,l=m.documentMode,q="on"+r in p&&(l===s||l>7);
function t(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}j.fn[r]=function(a){return a?this.bind(r,a):this.trigger(r)};j.fn[r].delay=50;n[r]=j.extend(n[r],{setup:function(){if(q){return false}j(o.start)},teardown:function(){if(q){return false}j(o.stop)}});o=(function(){var d={},e,a=t(),c=function(h){return h
},b=c,f=c;d.start=function(){e||g()};d.stop=function(){e&&clearTimeout(e);e=s};function g(){var h=t(),u=f(a);if(h!==a){b(a=h,u);j(p).trigger(r)}else{if(u!==a){location.href=location.href.replace(/#.*/,"")+u}}e=setTimeout(g,j.fn[r].delay)}j.browser.msie&&!q&&(function(){var u,h;d.start=function(){if(!u){h=j.fn[r].src;
h=h&&h+t();u=j('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){h||b(t());g()}).attr("src",h||"javascript:0").insertAfter("body")[0].contentWindow;m.onpropertychange=function(){try{if(event.propertyName==="title"){u.document.title=m.title}}catch(v){}}}};d.stop=c;f=function(){return t(u.location.href)
};b=function(w,z){var x=u.document,y=j.fn[r].domain;if(w!==z){x.title=m.title;x.open();y&&x.write('<script>document.domain="'+y+'"<\/script>');x.close();u.location.hash=w}}})();return d})()})(jQuery,this);(function(a){var b=null;a.modal=function(e,d){a.modal.close();var c,f;this.$body=a("body");this.options=a.extend({},a.modal.defaults,d);
this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10));if(e.is("a")){f=e.attr("href");if(/^#/.test(f)){this.$elm=a(f);if(this.$elm.length!==1){return null}this.open()}else{this.$elm=a("<div>");this.$body.append(this.$elm);c=function(h,g){g.elm.remove()};this.showSpinner();e.trigger(a.modal.AJAX_SEND);
a.get(f).done(function(g){if(!b){return}e.trigger(a.modal.AJAX_SUCCESS);b.$elm.empty().append(g).on(a.modal.CLOSE,c);b.hideSpinner();b.open();e.trigger(a.modal.AJAX_COMPLETE)}).fail(function(){e.trigger(a.modal.AJAX_FAIL);b.hideSpinner();e.trigger(a.modal.AJAX_COMPLETE)})}}else{this.$elm=e;this.open()
}};a.modal.prototype={constructor:a.modal,open:function(){var c=this;if(this.options.doFade){this.block();setTimeout(function(){c.show()},this.options.fadeDuration*this.options.fadeDelay)}else{this.block();this.show()}if(this.options.escapeClose){a(document).on("keydown.modal",function(d){if(d.which==27){a.modal.close()
}})}if(this.options.clickClose){this.blocker.click(a.modal.close)}},close:function(){this.unblock();this.hide();a(document).off("keydown.modal")},block:function(){var c=this.options.doFade?0:this.options.opacity;this.$elm.trigger(a.modal.BEFORE_BLOCK,[this._ctx()]);this.blocker=a('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:this.options.zIndex,background:this.options.overlay,opacity:c});
this.$body.append(this.blocker);if(this.options.doFade){this.blocker.animate({opacity:this.options.opacity},this.options.fadeDuration)}this.$elm.trigger(a.modal.BLOCK,[this._ctx()])},unblock:function(){if(this.options.doFade){this.blocker.fadeOut(this.options.fadeDuration,function(){this.remove()})}else{this.blocker.remove()
}},show:function(){this.$elm.trigger(a.modal.BEFORE_OPEN,[this._ctx()]);if(this.options.showClose){this.closeButton=a('<a href="#close-modal" rel="modal:close" class="close-modal">'+this.options.closeText+"</a>");this.$elm.append(this.closeButton)}this.$elm.addClass(this.options.modalClass+" current");
this.center();if(this.options.doFade){this.$elm.fadeIn(this.options.fadeDuration)}else{this.$elm.show()}this.$elm.trigger(a.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(a.modal.BEFORE_CLOSE,[this._ctx()]);if(this.closeButton){this.closeButton.remove()}this.$elm.removeClass("current");
if(this.options.doFade){this.$elm.fadeOut(this.options.fadeDuration)}else{this.$elm.hide()}this.$elm.trigger(a.modal.CLOSE,[this._ctx()])},showSpinner:function(){if(!this.options.showSpinner){return}this.spinner=this.spinner||a('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml);
this.$body.append(this.spinner);this.spinner.show()},hideSpinner:function(){if(this.spinner){this.spinner.remove()}},center:function(){this.$elm.css({position:"fixed",top:"50%",left:"50%",marginTop:-(this.$elm.outerHeight()/2),marginLeft:-(this.$elm.outerWidth()/2),zIndex:this.options.zIndex+1})},_ctx:function(){return{elm:this.$elm,blocker:this.blocker,options:this.options}
}};a.modal.prototype.resize=a.modal.prototype.center;a.modal.close=function(d){if(!b){return}if(d){d.preventDefault()}b.close();var c=b.$elm;b=null;return c};a.modal.resize=function(){if(!b){return}b.resize()};a.modal.defaults={overlay:"#000",opacity:0.75,zIndex:1,escapeClose:true,clickClose:true,closeText:"Close",modalClass:"modal",spinnerHtml:null,showSpinner:true,showClose:true,fadeDuration:null,fadeDelay:1};
a.modal.BEFORE_BLOCK="modal:before-block";a.modal.BLOCK="modal:block";a.modal.BEFORE_OPEN="modal:before-open";a.modal.OPEN="modal:open";a.modal.BEFORE_CLOSE="modal:before-close";a.modal.CLOSE="modal:close";a.modal.AJAX_SEND="modal:ajax:send";a.modal.AJAX_SUCCESS="modal:ajax:success";a.modal.AJAX_FAIL="modal:ajax:fail";
a.modal.AJAX_COMPLETE="modal:ajax:complete";a.fn.modal=function(c){if(this.length===1){b=new a.modal(this,c)}return this};a(document).on("click.modal",'a[rel="modal:close"]',a.modal.close)})(jQuery);(function(){var d,c,a,b=function(e,f){return function(){return e.apply(f,arguments)}};d=jQuery;c=(function(){function e(){}e.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"};
e.transition=function(g){var j,f,h,l;j=g[0];l=this.transitions;for(h in l){f=l[h];if(j.style[h]!=null){return f}}};return e})();a=(function(){e.settings={namespace:"growl",duration:5000,close:"&times;",location:"default",style:"information",size:"medium"};e.growl=function(f){if(f==null){f={}}this.initialize();
return new e(f)};e.initialize=function(){return d("body:not(:has(#growls))").append('<div id="growls" />')};function e(f){if(f==null){f={}}this.html=b(this.html,this);this.$growl=b(this.$growl,this);this.$growls=b(this.$growls,this);this.animate=b(this.animate,this);this.remove=b(this.remove,this);this.dismiss=b(this.dismiss,this);
this.present=b(this.present,this);this.close=b(this.close,this);this.cycle=b(this.cycle,this);this.unbind=b(this.unbind,this);this.bind=b(this.bind,this);this.render=b(this.render,this);this.settings=d.extend({},e.settings,f);this.$growls().attr("class",this.settings.location);this.render()}e.prototype.render=function(){var f;
f=this.$growl();this.$growls().append(f);this.cycle(f)};e.prototype.bind=function(f){if(f==null){f=this.$growl()}return f.find("."+this.settings.namespace+"-close").on("click",this.close)};e.prototype.unbind=function(f){if(f==null){f=this.$growl()}return f.find("."+(this.settings.namespace-close)).off("click",this.close)
};e.prototype.cycle=function(f){if(f==null){f=this.$growl()}return f.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)};e.prototype.close=function(g){var f;g.preventDefault();g.stopPropagation();f=this.$growl();return f.stop().queue(this.dismiss).queue(this.remove)
};e.prototype.present=function(g){var f;f=this.$growl();this.bind(f);return this.animate(f,""+this.settings.namespace+"-incoming","out",g)};e.prototype.dismiss=function(g){var f;f=this.$growl();this.unbind(f);return this.animate(f,""+this.settings.namespace+"-outgoing","in",g)};e.prototype.remove=function(f){this.$growl().remove();
return f()};e.prototype.animate=function(f,g,h,l){var j;if(h==null){h="in"}j=c.transition(f);f[h==="in"?"removeClass":"addClass"](g);f.offset().position;f[h==="in"?"addClass":"removeClass"](g);if(l==null){return}if(j!=null){f.one(j,l)}else{l()}};e.prototype.$growls=function(){return this.$_growls!=null?this.$_growls:this.$_growls=d("#growls")
};e.prototype.$growl=function(){return this.$_growl!=null?this.$_growl:this.$_growl=d(this.html())};e.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"
};return e})();d.growl=function(e){if(e==null){e={}}return a.growl(e)}}).call(this);var LZW={compress:function(f){var e,j={},h,g,d="",b=[],a=256;for(e=0;e<256;e+=1){j[String.fromCharCode(e)]=e}for(e=0;e<f.length;e+=1){h=f.charAt(e);g=d+h;if(j.hasOwnProperty(g)){d=g}else{b.push(j[d]);j[g]=a++;d=String(h)
}}if(d!==""){b.push(j[d])}return b},decompress:function(f){var e,h=[],c,b,d,g="",a=256;for(e=0;e<256;e+=1){h[e]=String.fromCharCode(e)}c=String.fromCharCode(f[0]);b=c;for(e=1;e<f.length;e+=1){d=f[e];if(h[d]){g=h[d]}else{if(d===a){g=c+c.charAt(0)}else{return null}}b+=g;h[a++]=c+g.charAt(0);c=g}return b
}};(function(a){EventPlayback={version:"0.0.3"};a.recordEvents=function(b,c){if(c){b.finished=c}return(new EventRecorder(b)).start()};a.playbackEvents=function(c,b,d){if(d){b.finished=d}return(new EventPlayer(c,b)).start()};EventRecorder=function(b){this.frames=[];this.running=false;this.options=a.extend({dom:a(document),delay:500},b||{})
};EventRecorder.prototype={encodeJSON:function(b){if(!b){return"null"}switch(b.constructor){case String:return'"'+b.replace(/"/gm,'\\"')+'"';case Number:return b.toString();case Array:var c=[];for(i in b){c.push(this.encodeJSON(b[i]))}return"["+c.join(",")+"]";case Object:var c=[];for(k in b){c.push(k+":"+this.encodeJSON(b[k]))
}return"{"+c.join(", ")+"}";default:return"null"}},exportJSON:function(){if(this.running){throw"EventRecorder: cannot export while running"}return"("+this.encodeJSON({frames:this.frames})+")"},exportFrames:function(){if(this.running){throw"EventRecorder: cannot export while running"}return JSON.stringify({frames:this.frames})
},packFrame:function(b){return{x:b.pageX,y:b.pageY,type:b.type,target:this.getElementXPath(b.target),value:b.type=="change"?a(b.target).val():null}},getElementXPath:function(b){for(segs=[];b&&b.nodeType==1;b=b.parentNode){if(b.hasAttribute("id")){segs.unshift('id("'+b.getAttribute("id")+'")');return segs.join("/")
}else{if(b.hasAttribute("class")){segs.unshift(b.localName.toLowerCase()+'[@class="'+b.getAttribute("class")+'"]')}else{for(i=1,sib=b.previousSibling;sib;sib=sib.previousSibling){if(sib.localName==b.localName){i++}}segs.unshift(b.localName.toLowerCase()+"["+i+"]")}}}return segs.length?"/"+segs.join("/"):null
},startRecording:function(){var b=this,c;a.each(["click","mousemove","change"],function(d,e){b.options.dom.bind(e,function(f){if(b.running){if(!f.pageX){f.pageX=c.x,f.pageY=c.y}c=b.packFrame(f);b.frames.push(c)}})});return this},stop:function(){this.running=false;if(this.options.finished instanceof Function){this.options.finished.call(this)
}return this},start:function(){var b=this;setTimeout(function(){b.running=true;b.startRecording();if(b.options.duration){setTimeout(function(){b.stop()},b.options.duration)}},this.options.delay);return this}};EventPlayer=function(c,b){this.session=c;this.options=a.extend({dom:a("body"),trigger:true,interval:25},b||{})
};EventPlayer.prototype={unpackFrame:function(b){b.xpath=b.target;b.target=a(this.getElementByXPath(b.target));return b},getElementByXPath:function(b){result=document.evaluate(b,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return result.singleNodeValue},playFrame:function(c){var b=this;isNewPath=this.lastPath!=c.xpath;
this.cursor.css({left:c.x,top:c.y});trigger=function(d){b.trigger(d,c.target)};triggerLast=function(d){b.trigger(d,a(b.getElementByXPath(b.lastPath)))};switch(c.type){case"click":this.cursor.addClass("clicking");this.showDisc();trigger("click");break;case"mousemove":trigger("mouseover");if(isNewPath){triggerLast("mouseout")
}break;case"change":trigger("change");c.target.val(c.value);break}if(this.cursor.hasClass("clicking")){this.cursor.removeClass("clicking");this.hideDisc()}this.lastPath=c.xpath;return this},trigger:function(b,c){if(this.options.trigger&&c){c.trigger(b)}return this},showDisc:function(b){this.disc.addClass(b||"blue").fadeIn(80);
return this},hideDisc:function(){this.disc.fadeOut(80,function(){a(this).removeClass("yellow").removeClass("blue").removeClass("red")});return this},play:function(){var b=this;this.intervalID=setInterval(function(){if(frame=b.session.frames.shift()){b.playFrame(b.unpackFrame(frame))}else{b.stop()}},this.options.interval);
return this},removeCursor:function(){a("#event-playback-cursor",this.dom).fadeOut("slow",function(){a(this).remove()});return this},displayCursor:function(){this.cursor=a('<div id="event-playback-cursor"><div class="disc"></div></div>');this.disc=a(".disc",this.cursor);this.options.dom.prepend(this.cursor);
this.cursor.fadeIn("slow");return this},stop:function(){this.running=false;clearInterval(this.intervalID);this.removeCursor();if(this.options.finished instanceof Function){this.options.finished.call(this)}return this},start:function(){var b=this;this.running=true;this.play().displayCursor();if(this.options.duration){setTimeout(function(){b.stop()
},this.options.duration)}return this}}})(jQuery);(function(a,b){if(typeof exports=="object"){module.exports=b()}else{if(typeof define=="function"&&define.amd){define(b)}else{a.Spinner=b()}}}(this,function(){var e=["webkit","Moz","ms","O"],r={},q;function g(s,v){var t=document.createElement(s||"div"),u;
for(u in v){t[u]=v[u]}return t}function h(t){for(var s=1,u=arguments.length;s<u;s++){t.appendChild(arguments[s])}return t}var j=(function(){var s=g("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],s);return s.sheet||s.styleSheet}());function c(w,s,x,B){var t=["opacity",s,~~(w*100),x,B].join("-"),u=0.01+x/B*100,A=Math.max(1-(1-w)/s*(100-u),w),y=q.substring(0,q.indexOf("Animation")).toLowerCase(),v=y&&"-"+y+"-"||"";
if(!r[t]){j.insertRule("@"+v+"keyframes "+t+"{0%{opacity:"+A+"}"+u+"%{opacity:"+w+"}"+(u+0.01)+"%{opacity:1}"+(u+s)%100+"%{opacity:"+w+"}100%{opacity:"+A+"}}",j.cssRules.length);r[t]=1}return t}function o(w,x){var v=w.style,t,u;x=x.charAt(0).toUpperCase()+x.slice(1);for(u=0;u<e.length;u++){t=e[u]+x;if(v[t]!==undefined){return t
}}if(v[x]!==undefined){return x}}function f(s,u){for(var t in u){s.style[o(s,t)||t]=u[t]}return s}function m(u){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var v in t){if(u[v]===undefined){u[v]=t[v]}}}return u}function l(s){var t={x:s.offsetLeft,y:s.offsetTop};while((s=s.offsetParent)){t.x+=s.offsetLeft,t.y+=s.offsetTop
}return t}function p(t,s){return typeof t=="string"?t:t[s%t.length]}var d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};function b(s){if(typeof this=="undefined"){return new b(s)
}this.opts=m(s||{},b.defaults,d)}b.defaults={};m(b.prototype,{spin:function(B){this.stop();var F=this,t=F.opts,u=F.el=f(g(0,{className:t.className}),{position:t.position,width:0,zIndex:t.zIndex}),E=t.radius+t.length+t.width,G,D;if(B){B.insertBefore(u,B.firstChild||null);D=l(B);G=l(u);f(u,{left:(t.left=="auto"?D.x-G.x+(B.offsetWidth>>1):parseInt(t.left,10)+E)+"px",top:(t.top=="auto"?D.y-G.y+(B.offsetHeight>>1):parseInt(t.top,10)+E)+"px"})
}u.setAttribute("role","progressbar");F.lines(u,F.opts);if(!q){var y=0,s=(t.lines-1)*(1-t.direction)/2,x,v=t.fps,A=v/t.speed,z=(1-t.opacity)/(A*t.trail/100),C=A/t.lines;(function w(){y++;for(var H=0;H<t.lines;H++){x=Math.max(1-(y+(t.lines-H)*C)%A*z,t.opacity);F.opacity(u,H*t.direction+s,x,t)}F.timeout=F.el&&setTimeout(w,~~(1000/v))
})()}return F},stop:function(){var s=this.el;if(s){clearTimeout(this.timeout);if(s.parentNode){s.parentNode.removeChild(s)}this.el=undefined}return this},lines:function(u,w){var t=0,x=(w.lines-1)*(1-w.direction)/2,s;function v(y,z){return f(g(),{position:"absolute",width:(w.length+w.width)+"px",height:w.width+"px",background:y,boxShadow:z,transformOrigin:"left",transform:"rotate("+~~(360/w.lines*t+w.rotate)+"deg) translate("+w.radius+"px,0)",borderRadius:(w.corners*w.width>>1)+"px"})
}for(;t<w.lines;t++){s=f(g(),{position:"absolute",top:1+~(w.width/2)+"px",transform:w.hwaccel?"translate3d(0,0,0)":"",opacity:w.opacity,animation:q&&c(w.opacity,w.trail,x+t*w.direction,w.lines)+" "+1/w.speed+"s linear infinite"});if(w.shadow){h(s,f(v("#000","0 0 4px #000"),{top:2+"px"}))}h(u,h(s,v(p(w.color,t),"0 0 1px rgba(0,0,0,.1)")))
}return u},opacity:function(t,s,u){if(s<t.childNodes.length){t.childNodes[s].style.opacity=u}}});function n(){function s(u,t){return g("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}j.addRule(".spin-vml","behavior:url(#default#VML)");b.prototype.lines=function(v,u){var t=u.length+u.width,B=2*t;
function A(){return f(s("group",{coordsize:B+" "+B,coordorigin:-t+" "+-t}),{width:B,height:B})}var w=-(u.width+u.length)*2+"px",z=f(A(),{position:"absolute",top:w,left:w}),y;function x(D,C,E){h(z,h(f(A(),{rotation:360/u.lines*D+"deg",left:~~C}),h(f(s("roundrect",{arcsize:u.corners}),{width:t,height:u.width,left:u.radius,top:-u.width>>1,filter:E}),s("fill",{color:p(u.color,D),opacity:u.opacity}),s("stroke",{opacity:0}))))
}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(y=1;y<=u.lines;y++){x(y)}return h(v,z)};b.prototype.opacity=function(u,t,w,v){var x=u.firstChild;v=v.shadow&&v.lines||0;if(x&&t+v<x.childNodes.length){x=x.childNodes[t+v];
x=x&&x.firstChild;x=x&&x.firstChild;if(x){x.opacity=w}}}}var a=f(g("group"),{behavior:"url(#default#VML)"});if(!o(a,"transform")&&a.adj){n()}else{q=o(a,"animation")}return b}));
/*! idTabs v3.0 ~ Sean Catchpole - Copyright 2010 MIT/GPL */
(function(d){var b,e,a=function(f){return d(f).attr("href")},c=function(f){return f===null&&"Null"||f===e&&"Undefined"||({}).toString.call(f).slice(8,-1)
};d.fn.idTabs=function(){var f=b.args.apply(this,arguments),g=f.update&&"update"||f.remove&&"remove"||"bind";f.area=this;b[g](f);return this};b=d.idTabs=function(f,p,g){var h,m,l,j=d(),n=d.metadata?d(f).metadata():{},o={tab:b.tab,item:b.item};o=d.extend(o,b.settings,n,p||{});o.tabarea=d(f);o.data=g||"idTabs"+ +new Date;
d.each({selected:".",event:"!",start:"#"},function(r,q){if(c(o[r])=="String"&&o[r].indexOf(q)==0){o[r]=o[r].substr(1)}});if(o.start===null){o.start=-1}l=[];o.tabs=m=d("a[href^=#]",f);m.each(function(){j=o.item(a(this));if(j.length){l=l.concat(j.get())}});o.items=d(l).hide();h="idTabs."+o.event;g=o.tabarea.data("idTabs")||{};
g[h]=o;o.tabarea.data("idTabs",g);m.trigger(h).data(o.data,o).bind(h,{s:o},function(){return b.unbind.apply(this,arguments)}).bind(o.event,{s:o},b.find);c(o.start)=="Number"&&(o.start<0||(j=m.eq(o.start)).length)||c(o.start)=="String"&&(j=m.filter("a[href=#"+o.start+"]")).length||(j=m.filter("."+o.selected).removeClass(o.selected)).length||(o.start===e&&(j=m.eq(0)).length);
if(j.length){j.trigger(o.event)}return o};b.args=function(){var f,h=0,j={},g=arguments,l=function(n,m){if(m.indexOf(".")==0){j.selected=m}else{if(m.indexOf("!")==0){if(/^!(true|false)$/i.test(m)){j.toggle=/^!true$/i.test(m)}else{j.event=m}}else{if(m.indexOf(":")==0){m=m.substr(1).toLowerCase();if(m.indexOf("!")==0){j[m.substr(1)]=false
}else{j[m]=true}}else{if(m){j.start=m}}}}};while(h<g.length){f=g[h++];switch(c(f)){case"Object":d.extend(j,f);break;case"Boolean":j.change=f;break;case"Number":j.start=f;break;case"Function":j.click=f;break;case"Null":j.start=f;break;case"String":d.each(f.split(/\s+/g),l);default:break}}return j};b.bind=function(f){if(!f){return
}var g="idTabs"+ +new Date;if(f.grouped){d.idTabs(f.area,f,g)}else{f.area.each(function(){d.idTabs(this,f,g)})}};b.update=function(g){if(!g){return}g.update=false;var f,h,l,j=g.event;j=(j+"").indexOf("!")==0&&j.substr(1)||j;j=j?"idTabs."+j:"";return g.area.each(function(){f=d(this);h=f.data("idTabs");
if(!h){return}if(j){l=d.extend({},h[j],g);b.remove(h[j]);b(l.tabarea,l,l.data)}else{for(j in h){if(!Object.hasOwnProperty.call(h,j)){continue}l=d.extend({},h[j],g);b.remove(h[j]);b(l.tabarea,l,l.data)}}})};b.remove=function(g){if(!g){return}var h,f,j=g.event;j=(j+"").indexOf("!")==0&&j.substr(1)||j;j="idTabs"+(j?"."+j:"");
return g.area.each(function(){h=d(this).data("idTabs");delete h["idTabs."+g.event];d(this).data("idTabs",h);f=g.tabs||d("a[href^=#]",this);if(!f.length&&d(this).is("a[href^=#]")){f=d(this)}f.trigger(j)})};b.find=function(j){var f=this,g=false,h=j.data.s;d("a[href="+a(this)+"]:first",h.area).each(function(){var l=d(this).data(h.data);
if(l){g=b.showtab.call(l.tabarea==h.tabarea?f:this,l,j)||g}});return g};b.showtab=function(f,g){if(!f||!f.toggle&&d(this).is("."+f.selected)){return f&&f.change}var h=a(this);if(f.click&&f.click.call(this,h,f,g)==false){return f.change}if(f.toggle&&d(this).is("."+f.selected)){h=null}return b.show.call(this,h,f,g)
};b.show=function(g,f){f.tabs.removeClass(f.selected);f.tab(g).addClass(f.selected);f.items.hide();f.item(g).show();return f.change};b.unbind=function(g){var f=g.data.s;d(this).removeData(f.data).unbind("idTabs."+f.event);return false};b.extend=function(){var f=arguments;return function(){[].push.apply(f,arguments);
this.idTabs.apply(this,f)}};b.tab=function(f){if(!f){return d([])}return d("a[href="+f+"]",this.tabarea)};b.item=function(g){if(!g){return d([])}var f=d(g);return f.length?f:d("."+g.substr(1))};b.settings={start:e,change:false,click:null,selected:".selected",event:"!click",toggle:false,grouped:false};
b.version="3.0"})(jQuery);$(document).ajaxSend(function(c,d,b){var a=$("meta[name=csrf-token]");if(a){d.setRequestHeader("X-App-Key",a.attr("content"))}});(function(e){function g(){var j=document.createElement("input"),h="onpaste";j.setAttribute(h,"");return(typeof j[h]==="function")?"paste":"input"}var b=g()+".mask",d=navigator.userAgent,c=/iphone/i.test(d),a=/android/i.test(d),f;
e.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};e.fn.extend({caret:function(l,h){var j;if(this.length===0||this.is(":hidden")){return}if(typeof l=="number"){h=(typeof h==="number")?h:l;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(l,h)
}else{if(this.createTextRange){j=this.createTextRange();j.collapse(true);j.moveEnd("character",h);j.moveStart("character",l);j.select()}}})}else{if(this[0].setSelectionRange){l=this[0].selectionStart;h=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){j=document.selection.createRange();
l=0-j.duplicate().moveStart("character",-100000);h=l+j.text.length}}return{begin:l,end:h}}},unmask:function(){return this.trigger("unmask")},mask:function(l,p){var m,j,o,q,n,h;if(!l&&this.length>0){m=e(this[0]);return m.data(e.mask.dataName)()}p=e.extend({placeholder:e.mask.placeholder,completed:null},p);
j=e.mask.definitions;o=[];q=h=l.length;n=null;e.each(l.split(""),function(r,s){if(s=="?"){h--;q=r}else{if(j[s]){o.push(new RegExp(j[s]));if(n===null){n=o.length-1}}else{o.push(null)}}});return this.trigger("unmask").each(function(){var A=e(this),v=e.map(l.split(""),function(E,D){if(E!="?"){return j[E]?p.placeholder:E
}}),C=A.val();function z(D){while(++D<h&&!o[D]){}return D}function w(D){while(--D>=0&&!o[D]){}return D}function u(G,D){var F,E;if(G<0){return}for(F=G,E=z(D);F<h;F++){if(o[F]){if(E<h&&o[F].test(v[E])){v[F]=v[E];v[E]=p.placeholder}else{break}E=z(E)}}y();A.caret(Math.max(n,G))}function r(H){var F,G,D,E;
for(F=H,G=p.placeholder;F<h;F++){if(o[F]){D=z(F);E=v[F];v[F]=G;if(D<h&&o[D].test(E)){G=E}else{break}}}}function x(G){var E=G.which,H,F,D;if(E===8||E===46||(c&&E===127)){H=A.caret();F=H.begin;D=H.end;if(D-F===0){F=E!==46?w(F):(D=z(F-1));D=E===46?z(D):D}s(F,D);u(F,D-1);G.preventDefault()}else{if(E==27){A.val(C);
A.caret(0,t());G.preventDefault()}}}function B(G){var D=G.which,I=A.caret(),F,H,E;if(G.ctrlKey||G.altKey||G.metaKey||D<32){return}else{if(D){if(I.end-I.begin!==0){s(I.begin,I.end);u(I.begin,I.end-1)}F=z(I.begin-1);if(F<h){H=String.fromCharCode(D);if(o[F].test(H)){r(F);v[F]=H;y();E=z(F);if(a){setTimeout(e.proxy(e.fn.caret,A,E),0)
}else{A.caret(E)}if(p.completed&&E>=h){p.completed.call(A)}}}G.preventDefault()}}}function s(F,D){var E;for(E=F;E<D&&E<h;E++){if(o[E]){v[E]=p.placeholder}}}function y(){A.val(v.join(""))}function t(E){var H=A.val(),G=-1,D,F;for(D=0,pos=0;D<h;D++){if(o[D]){v[D]=p.placeholder;while(pos++<H.length){F=H.charAt(pos-1);
if(o[D].test(F)){v[D]=F;G=D;break}}if(pos>H.length){break}}else{if(v[D]===H.charAt(pos)&&D!==q){pos++;G=D}}}if(E){y()}else{if(G+1<q){A.val("");s(0,h)}else{y();A.val(A.val().substring(0,G+1))}}return(q?D:n)}A.data(e.mask.dataName,function(){return e.map(v,function(E,D){return o[D]&&E!=p.placeholder?E:null
}).join("")});if(!A.attr("readonly")){A.one("unmask",function(){A.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(f);var E,D;C=A.val();E=t();f=setTimeout(function(){y();if(E==l.length){A.caret(0,E)}else{A.caret(E)}},10)}).bind("blur.mask",function(){t();if(A.val()!=C){A.change()
}}).bind("keydown.mask",x).bind("keypress.mask",B).bind(b,function(){setTimeout(function(){var D=t(true);A.caret(D);if(p.completed&&D==A.val().length){p.completed.call(A)}},0)})}t()})}})})(jQuery);var submitPaymentConfirmForm=function(c,d,b,e){var a=window.open(habboSecureServerRoot+"/creditflow/proceedWithPayment/"+c+"/"+d+"/"+b,"_blank","width=1024,height=768");
setTimeout(function(){if(!a||a.outerHeight===0){$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.flow.blocked"),style:"error"});trackEvent("paymentConfirm","flowBlocked")}else{$.growl({title:L10N.get("credits.growl.information.title"),message:L10N.get("credits.growl.flow.opened")});
trackEvent("paymentConfirm","flowOpened");a.focus();var f=setInterval(function(){if(a&&(a.closed||"undefined"===typeof a.closed)||"undefined"===typeof a){flowClosed(e);clearInterval(f)}},500)}},300)};var flowClosed=function(a){$.modal.close();trackEvent("paymentConfirm","flowClosed");$.ajax({url:habboSecureServerRoot+"/creditflow/balance",type:"POST"}).done(function(b,e,d){if(d.getResponseHeader("X-Auth-Needed")!="true"){var c=$("#user-balances");
c.find("span.balance:eq(0)").fadeOut(function(){$(this).text(d.getResponseHeader("X-Habbo-Balance")).fadeIn()});c.find("span.balance:eq(1)").fadeOut(function(){$(this).text(d.getResponseHeader("X-Habbo-Loyalty")).fadeIn()})}});if(a&&typeof(a)==="function"){a()}};var ConfirmListener={_callbacks:[],register:function(a){console.log(a);
ConfirmListener._callbacks.push(a)},run:function(d,c,a){if(ConfirmListener._callbacks){for(var b=0;b<ConfirmListener._callbacks.length;b++){ConfirmListener._callbacks[b](d,c,a)}}}};var refreshBalance=function(){$.ajax({url:habboSecureServerRoot+"/creditflow/balance",type:"POST"}).done(function(a,d,c){if(c.getResponseHeader("X-Auth-Needed")!="true"){var b=$("#user-balances");
b.find("span.balance:eq(0)").fadeOut(function(){$(this).text(c.getResponseHeader("X-Habbo-Balance")).fadeIn()});b.find("span.balance:eq(1)").fadeOut(function(){$(this).text(c.getResponseHeader("X-Habbo-Loyalty")).fadeIn()})}})};var L10N=function(){var a=[];return{put:function(b,c){a[b]=c;return this},get:function(b){return a[b]||b
}}}();var restoreClient=function(){try{if(parent.FlashExternalInterface){parent.FlashExternalInterface.closeWebPageAndRestoreClient()}else{restore()}}catch(a){restore()}};var restore=function(){$.ajax({url:"/creditflow/restore"})};var trackEvent=function(c,a){if(typeof(_gaq)=="undefined"||!_gaq){return
}var b="creditflow";_gaq.push(["_trackEvent",b,c,a])};var showFieldError=function(a,b){if(a=="disclaimer"){$("#disclaimer-field").before(['<div class="field-error">',b,"</div>"].join(""))}if(a=="confirmEmailAddress"){$(".confirm-email:first").html(['<span class="error">',b,"</span>"].join(""));$("#confirm-field").val("").removeClass("blue").addClass("error").focus()
}};$.fn.exists=function(){return this.length!==0};$(document).ready(function(){if(typeof registrationContext==="undefined"){window.registrationContext=false}$("#back-to-habbo").on("click",function(a){a.preventDefault();restoreClient()});$("#habbo-logo.client").on("click",function(a){a.preventDefault();
restoreClient()});$(".vouchers-anchor").on("click",function(b){b.preventDefault();var a=$("#vouchers").position();var d=a.top-120;var c=a.left;window.scrollTo(c,d)});$(".back-to-registration").on("click",function(a){a.preventDefault();try{NewUserReception.returnToClient()}catch(b){try{parent.NewUserReception.returnToClient()
}catch(b){$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.registration.return_error"),style:"error"})}}});$("body").on("keypress","#confirm-field",function(a){$("#confirm-field").removeClass("error").addClass("blue")});$("body").on("click",".proceed-with-payment",function(d){d.preventDefault();
var c=$(this).data("countryId");var a=$(this).data("methodId");var b=$(this).data("pricePointId");$.ajax({type:"POST",url:habboSecureServerRoot+"/creditflow/validate/"+c+"/"+b+"/"+a,data:{confirmEmailAddress:$("#confirm-field").val(),disclaimerApproved:$("#disclaimer-field").is(":checked")},async:false}).done(function(e,h,f){$("#confirmation-modal .field-error").remove();
if(e.fieldErrors){$.each(e.fieldErrors,function(j,l){showFieldError(j,l)})}else{var g=function(){window.location.replace(window.location.href)};if($(".payment-method-group").exists()){g=refreshBalance}submitPaymentConfirmForm(c,b,a,g)}})});$("body").on("click",".close-confirmation-modal",function(a){a.preventDefault();
$.modal.close();flowClosed(refreshBalance)});$(".redeem-form").submit(function(d){d.preventDefault();if(!$(this).data("busy")){$(this).data("busy",true);$("#vouchers").removeClass("success").removeClass("error");var e=$(this).find(".redeem-text:first");e.text(L10N.get("redeem.text.processing"));var c=$(this).find(".voucher-number-input:first");
c.attr("readonly",true);var a=c.position();var f=new Spinner({lines:8,length:4,width:3,radius:5}).spin();$(f.el).css({position:"absolute",top:a.top+c.height()-8+"px",left:a.left+c.width()-16+"px"}).insertAfter(c);var b=$(this);setTimeout(function(){$.ajax({url:habboSecureServerRoot+"/creditflow/redeemvoucher",type:"POST",data:b.serialize()}).done(function(g,l,j){if(j.getResponseHeader("X-Auth-Needed")!="true"){if(g.actionMessages&&g.actionMessages.length>0){var h=$("#user-balances");
h.find("span.balance:eq(0)").fadeOut(function(){$(this).text(j.getResponseHeader("X-Habbo-Balance")).fadeIn()});h.find("span.balance:eq(1)").fadeOut(function(){$(this).text(j.getResponseHeader("X-Habbo-Loyalty")).fadeIn()});$("#vouchers").addClass("success");e.text(g.actionMessages[0]);c.val("")}else{if(g.actionErrors&&g.actionErrors.length>0){$("#vouchers").addClass("error");
e.text(g.actionErrors[0])}}}}).always(function(){f.stop();c.removeAttr("readonly");b.removeData("busy")})},5000)}});$("#back-to-flow").on("click",function(a){if(window.opener){a.preventDefault();window.opener.focus();window.close()}});$(".tabs").idTabs();$(".confirm-payment-details-direct").click(function(e){e.preventDefault();
var f=$(this);var g=function(){window.location.replace(window.location.href)};if(!f.hasClass("pp")){var b=$(this).parents(".payment-method-group");if(b.exists()){f=b.find("li.selected").first();g=refreshBalance}}if(typeof f!=="undefined"&&f.attr("data-country-id")&&f.attr("data-price-point-id")){var d=f.data("countryId");
var a=f.data("methodId");var c=f.data("pricePointId");submitPaymentConfirmForm(d,c,a,g)}});$(".confirm-payment-details").click(function(b){b.preventDefault();var f=$(this);var j=function(){window.location.replace(window.location.href)};if(!f.hasClass("pp")){var e=$(this).parents(".payment-method-group");
if(e.exists()){f=e.find("li.selected").first();j=refreshBalance}}if(typeof f!=="undefined"&&f.attr("data-country-id")&&f.attr("data-price-point-id")){var h=f.data("countryId");var g=f.data("methodId");var c=f.data("pricePointId");var d=f.data("tabId");var a=habboSecureServerRoot+"/creditflow/confirm/"+h+"/"+c+"/"+d;
if(typeof g!=="undefined"){a+="/"+g}$.ajax({type:"GET",url:a,async:false}).done(function(l,n,m){if(m.getResponseHeader("X-Auth-Needed")!="true"){if(typeof l=="string"){if(typeof noModalPaymentMethodsEnabled!="undefined"&&noModalPaymentMethodsEnabled){$("#modalless-payment").html(l);$("#number").mask("9999-9999-9999-9999",{placeholder:"x"});
return}$(l).appendTo("#bottom-content").on($.modal.CLOSE,function(p,o){o.elm.remove()}).modal({escapeClose:true,clickClose:false,showClose:false,overlay:"#101016",opacity:0.9});$("#number").mask("9999-9999-9999-9999",{placeholder:"x"});ConfirmListener.run(h,c,$("#selectedPaymentMethodId").val())}else{submitPaymentConfirmForm(l.countryId,l.pricePointId,l.methodId,j)
}}}).fail(function(m,n,l){$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.flow.error"),style:"error"})})}});$(".cancel-subscription-confirmation").click(function(a){a.preventDefault();$("#confirmation-modal").modal({escapeClose:true,clickClose:false,showClose:false,overlay:"#101016",opacity:0.9})
});$(".close-confirmation-modal").click(function(a){a.preventDefault();$.modal.close()});$(".cancel-builders").click(function(c){c.preventDefault();var a=$(this).data("countryCode");var b=habboSecureServerRoot+"/creditflow/cancel_builders_club";$.ajax({type:"POST",url:b,data:{countryCode:a}}).done(function(d,f,e){if(e.getResponseHeader("X-Auth-Needed")!="true"){$.growl({title:L10N.get("credits.growl.subscription_cancelled.title"),message:L10N.get("credits.growl.subscription_cancelled.message")});
setTimeout(function(){window.location.replace(window.location.href)},1500)}})});$(".cancel-subscription").click(function(c){c.preventDefault();var a=$(this).data("countryCode");var b=habboSecureServerRoot+"/creditflow/cancel_credits_subscription";$.ajax({type:"POST",url:b,data:{countryCode:a}}).done(function(d,f,e){if(e.getResponseHeader("X-Auth-Needed")!="true"){$.growl({title:L10N.get("credits.growl.subscription_cancelled.title"),message:L10N.get("credits.growl.subscription_cancelled.message")});
setTimeout(function(){window.location.replace(window.location.href)},1500)}})});$("#payment-methods .payment-tab ul").find("li.pp").hover(function(){if(!$(this).hasClass("selected")&&!$(this).hasClass("disabled")){$(this).addClass("hover")}$(this).find("div.tooltip").addClass("tooltip-show")},function(){var a=$(this);
setTimeout(function(){a.removeClass("hover")},100);$(this).find("div.tooltip").removeClass("tooltip-show")});$("#payment-methods .payment-tab ul").find("li.pp").click(function(a){if(!$(this).hasClass("selected")&&!$(this).hasClass("disabled")){$(this).parents(".payment-method-group").find("li.selected").removeClass("selected");
$(this).addClass("selected").removeClass("hover");if(typeof noModalPaymentMethodsEnabled!="undefined"&&noModalPaymentMethodsEnabled){$(".confirm-payment-details").trigger("click")}}});if(typeof noModalPaymentMethodsEnabled!="undefined"&&noModalPaymentMethodsEnabled){$(".confirm-payment-details").trigger("click")
}});var EuCookiePolicy=(function(){return{init:function(){var c=Cookie.get("habbocpolicy");if(c==null){var a=jQuery("#eu_cookie_policy");a.show();b(1);jQuery("#eu_cookie_policy_close").click(function(){Cookie.set("habbocpolicy","hidden",730);b(-1);jQuery("#eu_cookie_policy").hide()})}function b(d){var e=jQuery("header");
if(e.hasClass("login-error")){e.attr("style","height: "+(e.height()+a.height()*d)+"px !important")}}}}})();var paypalPaymentDetails=null;var PaymentDetails=function(){var a=null;return{setNonce:function(b){a=b},getNonce:function(){return a}}};$(document).ready(function(){ConfirmListener.register(function(d,c,b){if($("#paypal-container").length){var e=habboSecureServerRoot+"/creditflow/braintree/clientToken/"+d+"/"+c+"/"+b;
$.ajax({type:"GET",timeout:15000,url:e,async:false}).done(function(f,h,g){braintree.setup(f.clientToken,"paypal",{container:"paypal-container",singleUse:true,onPaymentMethodReceived:function(j){paypalPaymentDetails=new PaymentDetails();paypalPaymentDetails.setNonce(j.nonce)}})})}});$("body").on("click",".execute-braintree-payment",function(c){c.preventDefault();
var e=BraintreeData.environments.production;if(typeof kountDetectionEnabled!="undefined"&&kountDetectionEnabled){e=BraintreeData.environments.production.withId(kountMerchantId)}BraintreeData.setup(braintreeMerchantId,"payment-form",e);var m=$(this).data("countryId");var j=$(this).data("methodId");var d=$(this).data("pricePointId");
var l=$("#device_data");var o="";if(l){o=l.val()}var f=$("#payment-form");var h=$(".execute-braintree-payment");h.attr("disabled","disabled");h.attr("value",L10N.get("credits.braintree_wait_message"));var g=f.position();var n=new Spinner({lines:12,length:15,width:10,radius:25,color:"#96E2E7",trail:40}).spin();
$(n.el).css({position:"absolute",top:g.top+(f.height()/2-15)+"px",left:g.left+(f.width()/2-15)+"px"}).insertAfter(f);var b=habboSecureServerRoot+"/creditflow/braintree/clientToken/"+m+"/"+d+"/"+j;$.ajax({type:"GET",timeout:15000,url:b,async:false}).done(function(q,s,r){if(paypalPaymentDetails!=null&&paypalPaymentDetails.getNonce()!=null){a(n,m,d,j,paypalPaymentDetails.getNonce(),o)
}else{var p=new braintree.api.Client({clientToken:q.clientToken});p.tokenizeCard({number:$.trim($("#number").val()),cardholder_name:$.trim($("#holder").val()),expiration_month:$.trim($("#month").val()),expiration_year:$.trim($("#year").val()),cvv:$.trim($("#cvv").val())},function(u,t){a(n,m,d,j,t,o)})
}}).fail(function(q,r,p){if(r=="timeout"){$("#purchase-options-lower, #payment-form").fadeOut("slow",function(){$("#result-message").append(L10N.get("credits.braintree.failure_message_prefix")+": "+L10N.get("credits.braintree.timeout_message"));$("#payment-result, #form-close-button").fadeIn()})}$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.flow.error"),style:"error"});
n.stop();h.removeAttr("disabled")})});function a(h,f,d,b,e,g){var c=habboSecureServerRoot+"/creditflow/braintree/proceedWithPayment/"+f+"/"+d+"/"+b+"/"+e+"/"+g;$.ajax({type:"GET",timeout:15000,url:c,async:true}).done(function(j,m,l){if(l.getResponseHeader("X-Auth-Needed")!="true"){$("#purchase-options-lower, #payment-form").fadeOut("slow",function(){if(j.directPaymentSuccess=="true"){$("#payment-result").prepend("<label>"+L10N.get("credits.braintree.success_header")+"</label>");
$("#result-message").append(L10N.get("credits.braintree.success_message_prefix")+" "+j.directPaymentTxId);$("#payment-result, #form-close-button").fadeIn()}else{$("#payment-result").prepend("<label>"+L10N.get("credits.braintree.failure_header")+"</label>");var p="";if(j.directPaymentMessage){var o=j.directPaymentMessage.split(".");
for(var n=0;n<o.length;n++){var q=o[n];if(q&&q!=""){q=q.replace(" ","_");p+=L10N.get("credits.braintree.failure_message."+q)+". "}}}else{p=j.directPaymentMessage}$("#result-message").append(L10N.get("credits.braintree.failure_message_prefix")+" "+p);$("#payment-result").addClass("payment-form-error");
$("#payment-result, #form-close-button").fadeIn()}})}}).fail(function(l,m,j){if(m=="timeout"){$("#purchase-options-lower, #payment-form").fadeOut("slow",function(){$("#result-message").append(L10N.get("credits.braintree.failure_message_prefix")+": "+L10N.get("credits.braintree.timeout_message"));$("#payment-result, #form-close-button").fadeIn()
})}$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.flow.error"),style:"error"})}).always(function(){h.stop();button.removeAttr("disabled")})}$("body").on("click",".proceed-with-braintree-payment",function(f){f.preventDefault();var g=$(this);if(typeof g!=="undefined"&&g.attr("data-country-id")&&g.attr("data-price-point-id")){var e=g.data("countryId");
var b=g.data("methodId");var d=g.data("pricePointId");var c=habboSecureServerRoot+"/creditflow/braintree/confirm/"+e+"/"+d;if(typeof b!=="undefined"){c+="/"+b}$.ajax({type:"GET",url:c,async:false}).done(function(h,l,j){if(j.getResponseHeader("X-Auth-Needed")!="true"){if(typeof noModalPaymentMethodsEnabled!="undefined"&&noModalPaymentMethodsEnabled){$("#modalless-payment").html(h);
$("#number").mask("9999-9999-9999-9999",{placeholder:"x"});return}$(h).appendTo("#bottom-content").on($.modal.CLOSE,function(n,m){m.elm.remove();if(registrationContext){window.location.replace(window.location.href)}else{refreshBalance()}}).modal({escapeClose:true,clickClose:false,showClose:false,overlay:"#101016",opacity:0.9});
$("#number").mask("9999-9999-9999-9999",{placeholder:"x"})}}).fail(function(j,l,h){$.growl({title:L10N.get("credits.growl.error.title"),message:L10N.get("credits.growl.flow.error"),style:"error"})})}})});